<div id="addPatientModal" class="modal-overlay">
        <div class="modal-content">
            <header class="modal-header">
                <h3 id="modalTitle">Add New Patient Record</h3>
                <button id="closeModalBtn" class="close-btn">&times;</button>
            </header>
            <form id="addPatientForm" class="modal-body">
                <div class="modal-form-content">
                    <input type="hidden" id="patientId">
                    <div class="form-grid">
                         <div class="form-group">
                            <label for="fullName">Full Name</label>
                            <input type="text" id="fullName" name="fullName" placeholder="e.g., Ananya Gupta" required>
                        </div>
                        <div class="form-group">
                            <label for="age">Age</label>
                            <input type="number" id="age" name="age" placeholder="e.g., 45" required>
                        </div>
                        <div class="form-group">
                            <label for="gender">Gender</label>
                            <select id="gender" name="gender" required>
                                <option value="" disabled selected>Select Gender</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="contact">Contact Number</label>
                            <input type="tel" id="contact" name="contact" placeholder="e.g., 9876543210">
                        </div>
                        <div class="form-group">
                            <label for="referral">Referred By</label>
                            <input type="text" id="referral" name="referral" value="SELF">
                        </div>
                         <div class="form-group">
                            <label for="paymentMode">Payment Mode</label>
                            <select id="paymentMode" name="paymentMode">
                                <option value="CASH">CASH</option>
                                <option value="CREDIT">CREDIT</option>
                            </select>
                        </div>
                    </div>
                    <div id="testSelectionSection" class="test-selection-area">
                        <h4>Select Tests</h4>
                        <div class="add-test-bar">
                            <input type="text" id="testSearch" list="testOptions" placeholder="Type to search for a test...">
                            < id="testOptions"></datalist>
                            <button type="button" id="addTestToPatientBtn" class="secondary-btn">Add</button>
                        </div>
                        <div class="selected-tests-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Test Name</th>
                                        <th>Cost</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="selectedTestsTableBody"></tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <footer class="modal-footer">
                    <div class="payment-summary">
                        <span>Total: <strong id="totalAmount">0.00</strong></span>
                        <div class="form-group-inline">
                            <label for="discount">Discount:</label>
                            <input type="number" id="discount" value="0">
                        </div>
                        <span>Payable: <strong id="payableAmount">0.00</strong></span>
                        <div class="form-group-inline">
                            <label for="paidAmount">Paid:</label>
                            <input type="number" id="paidAmount">
                        </div>
                        <span>Balance: <strong id="balanceAmount">0.00</strong></span>
                    </div>
                    <div class="footer-buttons">
                        <button type="button" class="secondary-btn" id="cancelBtn">Cancel</button>
                        <button type="submit" class="primary-btn" id="modalSubmitBtn">Save & Generate PDF Receipt</button>
                    </div>
                </footer>
            </form>
        </div>
    </div>datalist